# 配对交易策略（基于相关性选币）
## 前言
这是我尝试自己写的第一个量化交易策略，主要包括选币逻辑和交易逻辑，选币逻辑暂时先使用布欧的选币代码，交易逻辑采用FMZ草神的配对交易策略。<br>
也不能说自己写的，只能说把草神的策略（js）翻译成python版本的。正好熟悉一下欧易获取数据源、开单、平仓等API的使用以及python的语法

## 策略思路
### 选币
通过使用交易所所有币种的k线数据，两两算出皮尔森相关性，采用相关性较高的币种对<br>
### 进场逻辑
①获取选定两币(X和Y)的所有小时k线收盘价两两相除再相加（两币数据量不同时采用较小的那个币种的数据）取平均值获得平均比价，记为A1。<br>
②按一定的频率循环（10s），获取两个币种当前的价格相除获得当前比价记为A2。<br>
此时使用（A1 - A2）/ A2 算出偏离均价 s<br>
每偏离均价的阈值（0.01即1%）开单<br>
若s为正数说明此时 Xn / Yn > X / Y，X币价格相对偏高，Y币价格相对偏低，做空X币，做多Y币<br>
若s为负数说明此时 Xn / Yn < X / Y，X币价格相对偏低，Y币价格相对偏高，做多X币，做空Y币<br>
### 离场逻辑
按理来说，应该回归均值时，即偏离均价s为0时离场，但实际交易的时候这种情况比较少<br>
一般情况是，s为正数开单后，等s为负数再平仓，s为负数开单后，等s为正数再平仓<br>
草神的版本没有写离场逻辑，应该说他巧妙地处理了离场逻辑，他利用了欧易交易所单向持仓的机制，同一时间内只能持有同一币种的多单或者空单，如果你在持有币种X的多单时，想开X的空单，那么交易所会帮你把多单平掉再开空单。<br>
回到刚刚的进场逻辑，我们无非就是做空X，做多Y和做多X和做空Y，两者正好是相反的单子。<br>
也就是说s为正数的时的单子会在s为边负数且偏离我们设置的阈值时平仓离场。<br>
我觉得挺巧妙的，但是自己写的时候感觉没必要，因为这样会增长持仓时间。<br>